{% extends "User/header.html" %}
{% block content %}
{% load static %}
<div class="crumbs text-center">
    <div class="container">
        <div class="row">
            <ul class="btn-group btn-breadcrumb bc-list">
                <li class="btn btn1">
                    <a href="#">
                        <i class="glyphicon glyphicon-home"></i>
                    </a>
                </li>
                <li class="btn btn2">
                    <a href="#">Product Catalogue</a>
                </li>
                <li class="btn btn3 btn3a">
                    <a href="#">Single product</a>
                </li>
                <li class="btn btn4">
                    <a href="#">Checkout</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<!--//breadcrumbs ends here-->
<!--checkout-->
<div class="innerf-pages section">
    <div class="container">
        <div class="privacy about">
            <h4 class="rad-txt">
                <span class="abtxt1">review</span>
                <span class="abtext">your order</span>
            </h4>

            <div class="checkout-right">
                <h4>Your shopping cart contains:
					<span> {{ data|length }} Products</span>
				</h4>
                </h4>
              

					<table class="timetable_sub">
						<thead>
							<tr>
								<th>SL No.</th>
								<th>Image</th>

								<th>Quality</th>
								<th>Product Name</th>

								<th>Price</th>

							</tr>
						</thead>
						<tbody>

                                {%  for k in data  %}


                                <tr class="rem">
								<td class="invert">{{forloop.counter}}</td>
								<td class="invert-image">
									<a href="#">
										<img src="{{k.17}}" alt=" " class="img-responsive">
									</a>
								</td>

								<td class="invert">
									<div class="quantity">
										<div class="quantity-select">
                                            
											<div class="entry value-minus">&nbsp;</div>
											<div class="entry value">
												<span>{{k.3}}</span>
											</div>
											<div class="entry oid " style="display: none;">
												<span>{{k.0}}</span>
											</div>
											<div class="entry value-plus active">&nbsp;</div>
										</div>
									</div>
								</td>
								<td class="invert">{{k.13}}</td>
								<td class="invert namount">Rs {{k.2}}</td>

							</tr>

                            {% endfor  %}
						</tbody>
					</table>
				

            </div>
           
            <div class="checkout-left">

                <div class="checkout-right-basket">
                    <a href="/payment/{{check_no1}}">Make a Payment
                        <span class="fa fa-hand-o-right" aria-hidden="true"></span>
                    </a>
                </div>
            </div>

                <div class="clearfix"> </div>

            </div>

        </div>

    </div>
</div>
<script src="{%static 'assets/js/jquery-2.2.3.min.js' %}"></script>
<script>
    paypalm.minicartk.render(); //use only unique class names other than paypal1.minicart1.Also Replace same class name in css and minicart.min.js

    paypalm.minicartk.cart.on('checkout', function (evt) {
        var items = this.items(),
            len = items.length,
            total = 0,
            i;

        // Count the number of each item in the cart
        for (i = 0; i < len; i++) {
            total += items[i].get('quantity');
        }

        if (total <= 1) {
            alert('The minimum order quantity is 1. Please add more to your shopping cart before checking out');
            evt.preventDefault();
        }
    });
</script>
<!-- //cart-js -->

<!--quantity-->
<script>
$('#remove').on('click', function () {
id=$('#orderid').val();

$.ajax({

url: '/remove_order/',
data: {
'oid': id,

},

success: function (data) {




}
});

});


    $('.value-plus').on('click', function () {

        var divUpd = $(this).parent().find('.value'),
            newVal = parseInt(divUpd.text(), 10) + 1;
         
        divUpd.text(newVal);
        var d1 = $(this).parent().find('.oid')
       
        $(this).parent().parent().parent().parent().find('.namount').addClass('dddd')
        oid=d1.text()
       
        $.ajax({

url: '/add_qty/',
data: {
'oid': oid,
'newqty':newVal
},
dataType: 'json',
success: function (data) {


$('.dddd').html(data.price);


$('.value-plus').parent().parent().parent().parent().find('.namount').removeClass('dddd')


}
});

    });

    $('.value-minus').on('click', function () {
        var divUpd = $(this).parent().find('.value'),
            newVal = parseInt(divUpd.text(), 10) - 1;
        if (newVal >= 1)
        {
        divUpd.text(newVal);
        var d1 = $(this).parent().find('.oid')
        $(this).parent().parent().parent().parent().find('.namount').addClass('dddd')
        oid=d1.text()
        $.ajax({

url: '/sub_qty/',
data: {
'oid': oid,
'newqty':newVal
},
dataType: 'json',
success: function (data) {


$('.dddd').html(data.price);


$('.value-plus').parent().parent().parent().parent().find('.namount').removeClass('dddd')


}
});
        }

    });
</script>
<!--quantity-->
<script>
    $(document).ready(function (c) {
        $('.close1').on('click', function (c) {
            $('.rem1').fadeOut('slow', function (c) {
                $('.rem1').remove();
            });
        });
    });
</script>
<script>
    $(document).ready(function (c) {
        $('.close2').on('click', function (c) {
            $('.rem2').fadeOut('slow', function (c) {
                $('.rem2').remove();
            });
        });
    });
</script>
<script>
    $(document).ready(function (c) {
        $('.close3').on('click', function (c) {
            $('.rem3').fadeOut('slow', function (c) {
                $('.rem3').remove();
            });
        });
    });
</script>s
<link href="{%static 'assets/css/checkout.css' %}" type="text/css" rel="stylesheet" media="all">
{% endblock %}